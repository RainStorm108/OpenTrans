{"config":{"lang":["en","zh"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Home","text":"OpenTrans  <p>Documentation: https://rainstorm108.github.io/OpenTrans/</p> <p>PyPI: https://pypi.org/project/opentrans/</p> <p>Source Code: https://github.com/RainStorm108/OpenTrans</p> <p>OpenTrans is a privacy-first, local-LLM batch translation utility powered by Ollama. It mirrors a source directory into a target language while preserving the exact file hierarchy, making it ideal for documenting software, translating blogs, or localizing static sites.</p>"},{"location":"#key-features","title":"Key Features","text":"<ul> <li>Local-First (Ollama): Private, cost-free translation using models like Gemma, Llama 3, or DeepSeek.</li> <li>Syntax Shielding: Automatically protects code blocks (<code>``), inline code (</code>), LaTeX math ($), and Markdown links from being corrupted by the LLM.</li> <li>Directory Mirroring: Recursively replicates your source folder structure in the output destination.</li> <li>Parallel Processing: Uses <code>ThreadPoolExecutor</code> for high-speed batch handling of large file sets.</li> <li>Smart Caching: Uses hashing to track file changes. Only files that have been modified since the last run are sent to the LLM, saving significant time and compute resources.</li> <li>Resilient File Handling: Automatically pulls required models from Ollama with a real-time progress bar if they are missing.</li> </ul>"},{"location":"#installation","title":"Installation","text":"<p>Prerequisites: You must have Ollama installed and running.</p> <p>Option 1: Install via PyPI (Recommended)</p> <pre><code>pip install opentrans\n</code></pre> <p>Option 2: Install via uv</p> <pre><code>uv tool install opentrans\n</code></pre> <p>Option 3: From Source</p> <pre><code>git clone https://github.com/rainstorm108/OpenTrans.git\ncd OpenTrans\nuv tool install .\n</code></pre>"},{"location":"#usage","title":"Usage","text":""},{"location":"#basic-command","title":"Basic Command","text":"<p>The simplest way to run OpenTrans is by specifying the input and output directories:</p> <pre><code>opentrans ./docs ./translated_docs --config ./config.yaml\n</code></pre> <p>Example Output:</p> <pre><code>Target Language: Chinese\nInput:  /home/user/Projects/OpenTrans/docs\nOutput: /home/user/Projects/OpenTrans/translated_docs\nUsing Model: translategemma:4b\n\nTranslating Files: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 12/12 [00:45&lt;00:00, 3.7s/file]\n\nComplete.\n</code></pre>"},{"location":"#configuration-configyaml","title":"Configuration (config.yaml)","text":"<p>OpenTrans relies on a YAML configuration file to define the model and target language. See example.</p>"},{"location":"#running-examples","title":"Running Examples","text":"<pre><code>opentrans ./Example/Docusaurus/docs ./Example/Docusaurus/i18n/zh-hans/docusaurus-plugin-content-blog/current ./config.yaml    \n</code></pre>"},{"location":"#local-development","title":"Local Development","text":"<ol> <li> <p>Clone the repository <pre><code>git clone [https://github.com/rainstorm108/OpenTrans.git](https://github.com/rainstorm108/OpenTrans.git)\ncd OpenTrans\n</code></pre></p> </li> <li> <p>Set up the environment (using uv)</p> </li> </ol> <pre><code>uv sync\nsource .venv/bin/activate\n</code></pre> <ol> <li>Install in editable mode</li> </ol> <pre><code>uv pip install -e .\n</code></pre> <ol> <li>Run tests <pre><code>hatch test\n</code></pre></li> </ol>"},{"location":"#project-structure","title":"Project Structure","text":"<pre><code>OpenTrans/\n\u251c\u2500\u2500 src/\n\u2502   \u2514\u2500\u2500 opentrans/\n\u2502       \u251c\u2500\u2500 __init__.py        \n\u2502       \u251c\u2500\u2500 main.py            # CLI interface using Click\n\u2502       \u251c\u2500\u2500 settings.py        # Configuration management\n\u2502       \u251c\u2500\u2500 translator.py      # Core translation logic\n\u2502       \u251c\u2500\u2500 cache_manager.py   # Caching system\n\u2502       \u2514\u2500\u2500 hasher.py          # File content hashing\n\u251c\u2500\u2500 tests/\n\u251c\u2500\u2500 config.yaml                \n\u251c\u2500\u2500 pyproject.toml\n\u2514\u2500\u2500 README.md\n</code></pre>"},{"location":"#workflow","title":"Workflow","text":"<pre><code>graph TD\n    %% Setup Phase\n    Start((Start)) --&gt; CheckRunning{Ollama Running?}\n    CheckRunning -- No --&gt; Err[Error: Start Ollama]\n    CheckRunning -- Yes --&gt; CheckModel{Model Exists?}\n\n    CheckModel -- No --&gt; Pull[Download Model with Progress Bar]\n    Pull --&gt; Init\n    CheckModel -- Yes --&gt; Init[Load Paths &amp; Config]\n\n    %% The Loop\n    Init --&gt; NextFile{Next File?}\n    NextFile -- No --&gt; Exit([Exit])\n    NextFile -- Yes --&gt; IsTranslatable{File Type Supported?}\n\n    %% Branching Logic\n    IsTranslatable -- No --&gt; Mirror[Copy Original File]\n    IsTranslatable -- Yes --&gt; Shield[Apply Syntax Placeholders]\n\n    Shield --&gt; Trans[Translate via Ollama API]\n    Trans --&gt; Restore[Restore Protected Code/Math]\n    Restore --&gt; Save[Create Dir &amp; Save File]\n    Save --&gt; NextFile\n</code></pre>"},{"location":"#todo","title":"Todo","text":"<ul> <li>[x] Click-based CLI interface</li> <li>[x] Placeholder-based syntax protection (Code/LaTeX)</li> <li>[x] Multi-threaded parallel processing</li> <li>[x] Implement hash caching to skip unchanged files</li> <li>[ ] Finish the Docusaurus translate script</li> <li>[ ] User Tree-sitter to replace the code blocks before translation instead of regex</li> <li>[ ] Add support for more file types</li> <li>[ ] ...</li> </ul>"},{"location":"#license","title":"License","text":"<p>This project is licensed under the MIT License.</p>"},{"location":"zh/","title":"Home","text":"OpenTrans  <p>\u6587\u6863\uff1a https://rainstorm108.github.io/OpenTrans/</p> <p>PyPI\uff1a https://pypi.org/project/opentrans/</p> <p>\u6e90\u4ee3\u7801\uff1a https://github.com/RainStorm108/OpenTrans</p> <p>OpenTrans \u662f\u4e00\u6b3e\u7531 Ollama \u9a71\u52a8\u7684\u3001\u4ee5\u9690\u79c1\u4e3a\u5148\u3001\u672c\u5730 LLM \u6279\u91cf\u7ffb\u8bd1\u5de5\u5177\u3002\u5b83\u80fd\u591f\u5c06\u6e90\u76ee\u5f55\u955c\u50cf\u5230\u76ee\u6807\u8bed\u8a00\uff0c\u540c\u65f6\u4fdd\u7559\u539f\u59cb\u6587\u4ef6\u7ed3\u6784\uff0c\u975e\u5e38\u9002\u5408\u7528\u4e8e\u7f16\u5199\u8f6f\u4ef6\u6587\u6863\u3001\u7ffb\u8bd1\u535a\u5ba2\u6216\u672c\u5730\u5316\u9759\u6001\u7f51\u7ad9\u3002</p>"},{"location":"zh/#_1","title":"\u4e3b\u8981\u529f\u80fd","text":"<ul> <li>\u672c\u5730\u4f18\u5148 (Ollama)\uff1a \u4f7f\u7528 Gemma\u3001Llama 3 \u6216 DeepSeek \u7b49\u6a21\u578b\uff0c\u5728\u672c\u5730\u5b9e\u73b0\u79c1\u5bc6\u4e14\u514d\u8d39\u7684\u7ffb\u8bd1\u3002</li> <li>\u8bed\u6cd5\u4fdd\u62a4\uff1a \u81ea\u52a8\u4fdd\u62a4\u4ee3\u7801\u5757 (<code>``), inline code (</code>), LaTeX math ($), and Markdown links from being corrupted by the LLM.</li> <li>Directory Mirroring: Recursively replicates your source folder structure in the output destination.</li> <li>Parallel Processing: Uses <code>ThreadPoolExecutor</code> for high-speed batch handling of large file sets.</li> <li>Smart Caching: Uses hashing to track file changes. Only files that have been modified since the last run are sent to the LLM, saving significant time and compute resources.</li> <li>Resilient File Handling: Automatically pulls required models from Ollama with a real-time progress bar if they are missing.</li> </ul>"},{"location":"zh/#basic-command","title":"Basic Command","text":"<p>The simplest way to run OpenTrans is by specifying the input and output directories:</p> <pre><code>opentrans ./docs ./translated_docs --config ./config.yaml\n</code></pre> <p>Example Output:</p> <pre><code>\u76ee\u6807\u8bed\u8a00\uff1a\u4e2d\u6587\n\u8f93\u5165\uff1a /home/user/Projects/OpenTrans/docs\n\u8f93\u51fa\uff1a /home/user/Projects/OpenTrans/translated_docs\n\u4f7f\u7528\u6a21\u578b\uff1a translategemma:4b\n\n\u7ffb\u8bd1\u6587\u4ef6\uff1a 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 12/12 [00:45&lt;00:00, 3.7s/file]\n\n\u5b8c\u6210\u3002\n</code></pre>"},{"location":"zh/#running-examples","title":"Running Examples","text":"<pre><code>opentrans ./Example/Docusaurus/docs ./Example/Docusaurus/i18n/zh-hans/docusaurus-plugin-content-blog/current ./config.yaml\n</code></pre>"},{"location":"zh/#project-structure","title":"Project Structure","text":"<pre><code>OpenTrans/\n\u251c\u2500\u2500 src/\n\u2502   \u2514\u2500\u2500 opentrans/\n\u2502       \u251c\u2500\u2500 __init__.py        \n\u2502       \u251c\u2500\u2500 main.py            # \u4f7f\u7528 Click \u7684 CLI \u754c\u9762\n\u2502       \u251c\u2500\u2500 settings.py        # \u914d\u7f6e\u7ba1\u7406\n\u2502       \u251c\u2500\u2500 translator.py      # \u6838\u5fc3\u7ffb\u8bd1\u903b\u8f91\n\u2502       \u251c\u2500\u2500 cache_manager.py   # \u7f13\u5b58\u7cfb\u7edf\n\u2502       \u2514\u2500\u2500 hasher.py          # \u6587\u4ef6\u5185\u5bb9\u54c8\u5e0c\n\u251c\u2500\u2500 tests/\n\u251c\u2500\u2500 config.yaml                \n\u251c\u2500\u2500 pyproject.toml\n\u2514\u2500\u2500 README.md\n</code></pre>"},{"location":"zh/#workflow","title":"Workflow","text":"<pre><code>graph TD\n    %% Setup Phase\n    Start((Start)) --&gt; CheckRunning{Ollama \u8fd0\u884c?}\n    CheckRunning -- No --&gt; Err[\u9519\u8bef\uff1a\u542f\u52a8 Ollama]\n    CheckRunning -- Yes --&gt; CheckModel{\u6a21\u578b\u662f\u5426\u5b58\u5728?}\n\n    CheckModel -- No --&gt; Pull[\u4e0b\u8f7d\u6a21\u578b\uff0c\u5e26\u8fdb\u5ea6\u6761]\n    Pull --&gt; Init\n    CheckModel -- Yes --&gt; Init[\u52a0\u8f7d\u8def\u5f84 &amp; \u914d\u7f6e]\n\n    %% The Loop\n    Init --&gt; NextFile{\u4e0b\u4e00\u4e2a\u6587\u4ef6?}\n    NextFile -- No --&gt; Exit([\u9000\u51fa])\n    NextFile -- Yes --&gt; IsTranslatable{\u6587\u4ef6\u7c7b\u578b\u662f\u5426\u53d7\u652f\u6301?}\n\n    %% Branching Logic\n    IsTranslatable -- No --&gt; Mirror[\u590d\u5236\u539f\u59cb\u6587\u4ef6]\n    IsTranslatable -- Yes --&gt; Shield[\u5e94\u7528\u8bed\u6cd5\u5360\u4f4d\u7b26 (\u4ee3\u7801/LaTeX)]\n\n    Shield --&gt; Trans[\u901a\u8fc7 Ollama API \u7ffb\u8bd1]\n    Trans --&gt; Restore[\u6062\u590d\u4fdd\u62a4\u7684\u4ee3\u7801/\u6570\u5b66]\n    Restore --&gt; Save[\u521b\u5efa\u76ee\u5f55 &amp; \u4fdd\u5b58\u6587\u4ef6]\n    Save --&gt; NextFile\n</code></pre>"},{"location":"zh/#_2","title":"\u672a\u5b8c\u6210\u4e8b\u9879","text":"<ul> <li>[x] \u57fa\u4e8e Click \u7684 CLI \u754c\u9762</li> <li>[x] \u57fa\u4e8e\u5360\u4f4d\u7b26\u7684\u8bed\u6cd5\u4fdd\u62a4 (\u4ee3\u7801/LaTeX)</li> <li>[x] \u591a\u7ebf\u7a0b\u5e76\u884c\u5904\u7406</li> <li>[x] \u5b9e\u73b0\u54c8\u5e0c\u7f13\u5b58\uff0c\u8df3\u8fc7\u672a\u66f4\u6539\u7684\u6587\u4ef6</li> <li>[ ] \u5b8c\u6210 Docusaurus \u7ffb\u8bd1\u811a\u672c</li> <li>[ ] \u4f7f\u7528 User Tree-sitter \u66ff\u4ee3\u4ee3\u7801\u5757\uff0c\u5728\u7ffb\u8bd1\u4e4b\u524d\u8fdb\u884c\u5904\u7406</li> <li>[ ] \u589e\u52a0\u5bf9\u66f4\u591a\u6587\u4ef6\u7c7b\u578b\u7684\u652f\u6301</li> <li>[ ] ...</li> </ul>"},{"location":"zh/#_3","title":"\u8bb8\u53ef\u8bc1","text":"<p>\u8be5\u9879\u76ee\u5df2\u6839\u636e MIT \u8bb8\u53ef\u8bc1\u8fdb\u884c\u8bb8\u53ef\u3002</p>"}]}